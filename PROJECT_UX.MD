# Sazinka - Workflow & UI Koncept

> **Status:** MVP kompletnÃ­  
> **Verze:** 0.3  
> **Datum:** 2026-02-02
> 
> **ImplementovÃ¡no:**
> - âœ… Fronta k obvolÃ¡nÃ­ (`/queue`) - filtry, statistiky, akce
> - âœ… Dialog pro plÃ¡novÃ¡nÃ­ nÃ¡vÅ¡tÄ›vy (datum, ÄasovÃ© okno, dÃ©lka)
> - âœ… Dialog pro odloÅ¾enÃ­ (snooze)
> - âœ… KalendÃ¡Å™ - pÅ™epÃ­naÄ TermÃ­ny/NaplÃ¡novanÃ©
> - âœ… **PlÃ¡n dne** (`/planner`) - slouÄenÃ¡ strÃ¡nka PlÃ¡novÃ¡nÃ­ + MÅ¯j den:
>   - Mapa s trasou + statistiky
>   - Seznam zastÃ¡vek s akcemi (navigovat, volat, hotovo)
>   - Google Maps export (single + segmented)
>   - Tisk/PDF
>   - NÃ¡hled fronty k obvolÃ¡nÃ­
> - âœ… Smart Slots - inteligentnÃ­ nÃ¡vrhy ÄasovÃ½ch slotÅ¯ podle existujÃ­cÃ­ trasy
> - âœ… Detail revize (`/revisions/:id`) - workflow hub
> - âœ… Dashboard - clickable stats, CTA fronta k obvolÃ¡nÃ­
> 
> **ZmÄ›ny v navigaci:**
> - `/planner` â†’ "PlÃ¡n dne" (slouÄeno PlÃ¡novÃ¡nÃ­ + MÅ¯j den)
> - `/today` â†’ pÅ™esmÄ›rovÃ¡nÃ­ na `/planner`
> - NavigaÄnÃ­ poloÅ¾ka "MÅ¯j den" odstranÄ›na

## PÅ™ehled

Tento dokument popisuje workflow a UI koncept pro klÃ­Äovou ÄÃ¡st aplikace Sazinka - plÃ¡novÃ¡nÃ­ pravidelnÃ½ch revizÃ­ a nÃ¡vÅ¡tÄ›v u zÃ¡kaznÃ­kÅ¯.

### CÃ­lovÃ¡ skupina
- DrobnÃ­ Å™emeslnÃ­ci (kominÃ­ci, plynaÅ™i, reviznÃ­ technici)
- PravidelnÃ© revize v intervalech 11-12 mÄ›sÃ­cÅ¯
- Jedno nebo vÃ­ce vozidel, jedno nebo vÃ­ce dep
- DispeÄerka + technici NEBO Å™emeslnÃ­k sÃ¡m

---

## ZÃ¡kladnÃ­ architektura

Aplikace mÃ¡ **3+1 vrstvy prÃ¡ce**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. CO SE BLÃÅ½Ã                                                  â”‚
â”‚     Automaticky spoÄÃ­tanÃ© "due window" (11-12 mÄ›sÃ­cÅ¯ od revize) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. DOMLUVIT                                                     â”‚
â”‚     Call workflow â†’ vybrat termÃ­n + ÄasovÃ© okno + sluÅ¾bu        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. NAPLÃNOVAT DEN                                               â”‚
â”‚     Route planner â†’ optimalizace poÅ™adÃ­ + ÄasovÃ¡ okna + depa    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. DEN VÃJEZDU (operativa)                                      â”‚
â”‚     RychlÃ© Ãºpravy, pÅ™esuny, export trasy                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Workflow krok za krokem

### 1. Po dokonÄenÃ­ revize â†’ automatickÃ¡ dalÅ¡Ã­ revize

KdyÅ¾ technik oznaÄÃ­ revizi jako "Hotovo":

1. UloÅ¾it `lastServiceAt` (datum dokonÄenÃ­)
2. SpoÄÃ­tat `nextDueFrom = lastServiceAt + 11 mÄ›sÃ­cÅ¯`
3. SpoÄÃ­tat `nextDueTo = lastServiceAt + 12 mÄ›sÃ­cÅ¯`
4. VytvoÅ™it novou revizi se stavem "ÄekÃ¡ na kontakt"

**UI - Detail zÃ¡kaznÃ­ka:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ  Jan NovÃ¡k                                    â”‚
â”‚ Revize plynovÃ©ho kotle                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PoslednÃ­ revize: 15.01.2026 (kotel)            â”‚
â”‚ DalÅ¡Ã­ revize:    10.12.2026 â€“ 15.01.2027       â”‚
â”‚ Stav:            â³ ÄŒekÃ¡ na kontakt             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“ Zavolat]  [ğŸ“… Domluvit]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Fronta k obvolÃ¡nÃ­

HlavnÃ­ pracovnÃ­ obrazovka pro dispeÄerku i Å™emeslnÃ­ka-sÃ³listu.

**ZobrazenÃ­:**
- ZÃ¡kaznÃ­ci v oknÄ› 11-12 mÄ›sÃ­cÅ¯ od poslednÃ­ revize
- ZÃ¡kaznÃ­ci po termÃ­nu (prioritnÄ› nahoÅ™e)

**Filtry:**
- Oblast (mÄ›sto/PSÄŒ/region)
- Typ sluÅ¾by (kotel, komÃ­n, plyn...)
- Depot/vozidlo
- Priorita
- "Nevolat dopoledne" a podobnÃ© preference

**Informace u kaÅ¾dÃ©ho zÃ¡kaznÃ­ka:**
1. Kde je zÃ¡kaznÃ­k (adresa + mini mapa / region)
2. Jak dlouho trvÃ¡ Ãºkon (servisnÃ­ Äas)
3. Stav kontaktu (naposledy volÃ¡no, poznÃ¡mka)

**UI - Fronta k obvolÃ¡nÃ­:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ Fronta k obvolÃ¡nÃ­                    [Filtr â–¾] [Oblast â–¾]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ ğŸ”´ PO TERMÃNU (3)                                                   â”‚
â”‚ â”œâ”€â”€ Karel Svoboda    â”‚ Brno-stÅ™ed  â”‚ Kotel 45min â”‚ â˜ï¸ 3x neÃºspÄ›Å¡nÄ› â”‚
â”‚ â”œâ”€â”€ Marie DvoÅ™Ã¡kovÃ¡  â”‚ Brno-sever  â”‚ KomÃ­n 30min â”‚ â˜ï¸ NezvedÃ¡      â”‚
â”‚ â””â”€â”€ Petr ÄŒernÃ½       â”‚ Blansko     â”‚ Kotel 45min â”‚ â˜ï¸ NevolÃ¡no     â”‚
â”‚                                                                     â”‚
â”‚ ğŸŸ¡ TENTO TÃDEN (8)                                                  â”‚
â”‚ â”œâ”€â”€ Jana NovÃ¡kovÃ¡    â”‚ VyÅ¡kov      â”‚ Kotel 45min â”‚ â˜ï¸ NevolÃ¡no     â”‚
â”‚ â”œâ”€â”€ ...                                                             â”‚
â”‚                                                                     â”‚
â”‚ ğŸŸ¢ PÅ˜ÃÅ TÃ TÃDEN (12)                                                â”‚
â”‚ â””â”€â”€ ...                                                             â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Celkem: 23 zÃ¡kaznÃ­kÅ¯ k obvolÃ¡nÃ­                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Domluva nÃ¡vÅ¡tÄ›vy (klÃ­ÄovÃ¡ obrazovka)

**ZÃ¡sadnÃ­ princip:** PÅ™i domluvÄ› nesmÃ­Å¡ vybÃ­rat sloty naslepo. NabÃ­dka termÃ­nÅ¯ musÃ­ odrÃ¡Å¾et realitu trasy.

**UI - Dialog "Domluvit nÃ¡vÅ¡tÄ›vu":**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… Domluvit nÃ¡vÅ¡tÄ›vu                                         [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ ZÃKAZNÃK                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Jan NovÃ¡k                                                       â”‚ â”‚
â”‚ â”‚ LesnÃ­ 123, Brno 61500                                          â”‚ â”‚
â”‚ â”‚ ğŸ“ +420 777 123 456                                             â”‚ â”‚
â”‚ â”‚ âš ï¸ PoznÃ¡mka: Parkovat za domem, zvonek nefunguje               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚ TYP ÃšKONU                           DÃ‰LKA                          â”‚
â”‚ [Revize kotle      â–¾]               [45 min â–¾]                     â”‚
â”‚                                                                     â”‚
â”‚ KDO POJEDE                          DEPO                           â”‚
â”‚ [Technik 1 - Petr  â–¾]               [Brno-stÅ™ed â–¾]                 â”‚
â”‚                                                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                     â”‚
â”‚ VÃBÄšR DNE                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Po    Ãšt    St    ÄŒt    PÃ¡    So    Ne                        â”‚ â”‚
â”‚ â”‚  27    28    29    30    31     1     2                        â”‚ â”‚
â”‚ â”‚  [3]   [5]   [2]  [ğŸ”µ4]  [6]   [-]   [-]                       â”‚ â”‚
â”‚ â”‚                    â†‘ vybranÃ½ den                                â”‚ â”‚
â”‚ â”‚  (ÄÃ­sla = poÄet volnÃ½ch slotÅ¯)                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚ DOPORUÄŒENÃ‰ SLOTY PRO 30.01.2026                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â­ 10:15 - 11:00  â”‚ NejlepÅ¡Ã­ pro trasu â”‚ +0 min      â”‚ [Vybrat]â”‚ â”‚
â”‚ â”‚    08:30 - 09:15  â”‚ RannÃ­ slot         â”‚ +8 min      â”‚ [Vybrat]â”‚ â”‚
â”‚ â”‚    13:45 - 14:30  â”‚ Po obÄ›dÄ›           â”‚ +12 min     â”‚ [Vybrat]â”‚ â”‚
â”‚ â”‚    15:30 - 16:15  â”‚ OdpolednÃ­          â”‚ +18 min     â”‚ [Vybrat]â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚ NEBO VLASTNÃ ÄŒAS                                                   â”‚
â”‚ [ÄŒasovÃ© okno: ___:___ - ___:___]  âš ï¸ +25 min navÃ­c k trase        â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              [ZruÅ¡it]  [âœ“ Domluvit nÃ¡vÅ¡tÄ›vu]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Algoritmus nabÃ­dky slotÅ¯:**

Aplikace v pozadÃ­:
1. Vezme jiÅ¾ domluvenÃ© zakÃ¡zky v ten den pro vybranÃ½ vÅ¯z
2. VypoÄte odhad pÅ™Ã­jezdu a dopad na trasu
3. NabÃ­dne 3-5 nejlepÅ¡Ã­ch slotÅ¯:
   - "NejbliÅ¾Å¡Ã­ k trase" (minimÃ¡lnÃ­ objÃ­Å¾Äka)
   - "NejkratÅ¡Ã­ celkovÃ¡ cesta"
   - "Bez rizika zpoÅ¾dÄ›nÃ­"

KaÅ¾dÃ½ slot ukazuje:
- PÅ™edpoklÃ¡danÃ½ Äas pÅ™Ã­jezdu (napÅ™. 10:20)
- Servis do (napÅ™. 11:05)
- Dopad na trasu ("+12 min" nebo "âˆ’5 min")

---

### 4. PlÃ¡novÃ¡nÃ­ dne (dispeÄerskÃ½ pohled)

Zde se sklÃ¡dÃ¡ dennÃ­ plÃ¡n a Å™eÅ¡Ã­ multi-car a depa.

**UI - PlÃ¡novaÄ dne:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… PlÃ¡n dne: 30.01.2026              [â—€ PÅ™edchozÃ­] [DalÅ¡Ã­ â–¶]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Technik 1 - Petr]  [Technik 2 - Jan]  [+ PÅ™idat vozidlo]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ZASTÃVKY (9)           â”‚                    MAPA                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ  Depo Brno       â”‚ â”‚  â”‚                                            â”‚   â”‚
â”‚ â”‚    Start 08:00     â”‚ â”‚  â”‚         ğŸ                                  â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚          â•²                                 â”‚   â”‚
â”‚ â”‚ 1. Jan NovÃ¡k       â”‚ â”‚  â”‚           â•²  â‘                             â”‚   â”‚
â”‚ â”‚    08:27 - 09:12   â”‚ â”‚  â”‚            â•²â”€â”€â—                            â”‚   â”‚
â”‚ â”‚    â±ï¸ 45min â”‚ ğŸ”’    â”‚ â”‚  â”‚               â•²                           â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚                â•²  â‘¡                       â”‚   â”‚
â”‚ â”‚ 2. Marie SvobodovÃ¡ â”‚ â”‚  â”‚                 â—â”€â”€â•²                       â”‚   â”‚
â”‚ â”‚    09:35 - 10:05   â”‚ â”‚  â”‚                      â•²  â‘¢                  â”‚   â”‚
â”‚ â”‚    â±ï¸ 30min        â”‚ â”‚  â”‚                       â—                    â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚                      â•±                     â”‚   â”‚
â”‚ â”‚ 3. Petr ÄŒernÃ½      â”‚ â”‚  â”‚                    â•±                       â”‚   â”‚
â”‚ â”‚    10:28 - 11:13   â”‚ â”‚  â”‚                  ğŸ                         â”‚   â”‚
â”‚ â”‚    â±ï¸ 45min â”‚ âš ï¸    â”‚ â”‚  â”‚                                            â”‚   â”‚
â”‚ â”‚    Riziko zpoÅ¾dÄ›nÃ­ â”‚ â”‚  â”‚                                            â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”‚ ...                â”‚ â”‚                                                    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  STATISTIKY                                       â”‚
â”‚ â”‚ ğŸ  Depo Brno       â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚    NÃ¡vrat ~16:30   â”‚ â”‚  â”‚ CelkovÃ¡ vzdÃ¡lenost:  87 km                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ CelkovÃ½ Äas:         6h 45min              â”‚   â”‚
â”‚                        â”‚  â”‚ ServisnÃ­ Äas:        5h 15min              â”‚   â”‚
â”‚ [â†» Re-optimalizovat]   â”‚  â”‚ ÄŒas na cestÄ›:        1h 30min              â”‚   â”‚
â”‚ [+ PÅ™idat zastÃ¡vku]    â”‚  â”‚ Konflikty:           1 âš ï¸                   â”‚   â”‚
â”‚                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Interakce:**
- Drag & drop pro zmÄ›nu poÅ™adÃ­ zastÃ¡vek
- "Re-optimalizovat" tlaÄÃ­tko (zachovÃ¡ domluvenÃ¡ okna)
- "Zamknout poÅ™adÃ­" ğŸ”’ pro citlivÃ© zakÃ¡zky
- PÅ™etÃ¡hnout zakÃ¡zku mezi auty (multi-car reÅ¾im)

**VarovÃ¡nÃ­ (musÃ­ bÃ½t velmi viditelnÃ¡):**
- ğŸ”´ ÄŒasovÃ© okno nestÃ­hÃ¡ vyjÃ­t
- ğŸŸ¡ Riziko zpoÅ¾dÄ›nÃ­ (trasa natÄ›sno)
- ğŸŸ  PÅ™ejezd pÅ™Ã­liÅ¡ dlouhÃ½
- âš« PÅ™ekroÄenÃ­ pracovnÃ­ doby

---

### 5. Den vÃ½jezdu (operativa + export)

Bez mobilnÃ­ aplikace potÅ™ebuje technik jednoduchÃ© webovÃ© rozhranÃ­.

**UI - MÅ¯j dneÅ¡nÃ­ plÃ¡n:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± MÅ¯j plÃ¡n na 30.01.2026                        [ğŸ”„] [ğŸ“¤ Export]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â‘  Jan NovÃ¡k                                    08:27 - 09:12   â”‚ â”‚
â”‚ â”‚    LesnÃ­ 123, Brno                                              â”‚ â”‚
â”‚ â”‚    ğŸ“ +420 777 123 456                                          â”‚ â”‚
â”‚ â”‚    Revize kotle â”‚ 45 min                                        â”‚ â”‚
â”‚ â”‚    âš ï¸ Parkovat za domem                                         â”‚ â”‚
â”‚ â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚    [ğŸ—ºï¸ Navigovat]  [ğŸ“ Volat]  [âœ“ Hotovo]  [âœ• NezastiÅ¾en]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â‘¡ Marie SvobodovÃ¡                              09:35 - 10:05   â”‚ â”‚
â”‚ â”‚    HlavnÃ­ 45, Brno-sever                                        â”‚ â”‚
â”‚ â”‚    ğŸ“ +420 608 234 567                                          â”‚ â”‚
â”‚ â”‚    VymetÃ¡nÃ­ komÃ­nu â”‚ 30 min                                     â”‚ â”‚
â”‚ â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚    [ğŸ—ºï¸ Navigovat]  [ğŸ“ Volat]  [âœ“ Hotovo]  [âœ• NezastiÅ¾en]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚ ... dalÅ¡Ã­ zastÃ¡vky ...                                              â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Hotovo: 0/9  â”‚  ZbÃ½vÃ¡: ~6h 45min  â”‚  DalÅ¡Ã­: Jan NovÃ¡k za 15 min   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Exporty:**
- "OtevÅ™Ã­t trasu v Google Maps" (waypoints, pÅ™i limitu rozdÄ›lit)
- PDF "dennÃ­ plÃ¡n" (adresa, okno, poznÃ¡mky, telefon)
- CSV export (pro vlastnÃ­ navigaci / archiv)

---

## Role a reÅ¾imy pouÅ¾itÃ­

### ReÅ¾im A: DispeÄerka + 1-N aut

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DispeÄerka    â”‚     â”‚   Technik 1     â”‚     â”‚   Technik 2     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Fronta        â”‚     â”‚ â€¢ MÅ¯j plÃ¡n      â”‚     â”‚ â€¢ MÅ¯j plÃ¡n      â”‚
â”‚ â€¢ Domluva       â”‚â”€â”€â”€â”€â–¶â”‚ â€¢ Status update â”‚     â”‚ â€¢ Status update â”‚
â”‚ â€¢ PlÃ¡novÃ¡nÃ­     â”‚     â”‚ â€¢ Export        â”‚     â”‚ â€¢ Export        â”‚
â”‚ â€¢ PÅ™ehledy      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ReÅ¾im B: Å˜emeslnÃ­k sÃ¡m

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Å˜emeslnÃ­k (vÅ¡e sÃ¡m)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Fronta + mini plÃ¡novÃ¡nÃ­ v jednom  â”‚
â”‚ â€¢ "MÅ¯j plÃ¡n" jako vÃ½chozÃ­ homepage  â”‚
â”‚ â€¢ Domluva s automatickÃ½mi sloty     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## KlÃ­ÄovÃ© datovÃ© entity

| Entita | Popis | KlÃ­ÄovÃ© atributy |
|--------|-------|------------------|
| Customer | ZÃ¡kaznÃ­k | adresa, GPS, kontakt, poznÃ¡mky |
| Device | ZaÅ™Ã­zenÃ­ k revizi | typ, revision_interval_months |
| Revision | PlÃ¡novanÃ¡/provedenÃ¡ revize | due_date, scheduled_date, time_window, status |
| Vehicle | Vozidlo/technik | depot_id, kapacita, pracovnÃ­ doba |
| Depot | VÃ½chozÃ­ mÃ­sto | adresa, GPS |
| Route | DennÃ­ plÃ¡n | datum, vehicle_id, zastÃ¡vky[], statistiky |

---

## Stavy revize (lifecycle)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   VYTVOÅ˜ENO  â”‚
                    â”‚ (automaticky)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ODLOÅ½ENO   â”‚â—„â”€â”€â”€â”‚   ÄŒEKÃ NA    â”‚
â”‚              â”‚    â”‚   KONTAKT    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚ zÃ¡kaznÃ­k kontaktovÃ¡n
       â”‚                   â–¼
       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  DOMLUVENO   â”‚
                   â”‚ (mÃ¡ termÃ­n)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ pÅ™iÅ™azeno do trasy
                          â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ NAPLÃNOVÃNO  â”‚
                   â”‚ (v trase)    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼             â–¼             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ HOTOVO   â”‚  â”‚NEZASTIÅ½ENâ”‚  â”‚ ZRUÅ ENO  â”‚
     â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ automaticky
          â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  DALÅ Ã   â”‚
     â”‚ REVIZE   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DvÄ› UX vÄ›ci, kterÃ© udÄ›lajÃ­ nejvÄ›tÅ¡Ã­ rozdÃ­l

### 1. NabÃ­dka slotÅ¯ pÅ™i domluvÄ›
Ne "vyberte si datum a Äas naslepo", ale inteligentnÃ­ nÃ¡vrhy na zÃ¡kladÄ› aktuÃ¡lnÃ­ trasy.

### 2. Jedno kliknutÃ­: z domluvy do plÃ¡nu
A hned vidÄ›t dopad na trasu (vzdÃ¡lenost, Äas, konflikty).

---

## PlÃ¡n integrace UI podle workflow

CÃ­l: UÅ¾ivatel nesmÃ­ "pÅ™eskakovat" mezi izolovanÃ½mi strÃ¡nkami. KaÅ¾dÃ¡ obrazovka musÃ­ nabÃ­dnout jasnÃ½ dalÅ¡Ã­ krok a kontext.

### GlobÃ¡lnÃ­ pravidla navigace
- VÅ¾dy viditelnÃ© CTA pro dalÅ¡Ã­ krok workflow (napravo nahoÅ™e / v detail panelu).
- KaÅ¾dÃ¡ revize/zÃ¡kaznÃ­k mÃ¡ dostupnÃ© akce: `Detail`, `Domluvit`, `NaplÃ¡novat`, `OznaÄit hotovo` podle stavu.
- ZobrazenÃ­ kontextu: u kaÅ¾dÃ© revize vÅ¾dy zobrazit zÃ¡kaznÃ­ka, adresu, termÃ­n a stav.

### StrÃ¡nky a jejich propojenÃ­ (MVP plÃ¡n)
1. Dashboard
   - CTA: "Fronta k obvolÃ¡nÃ­" (primÃ¡rnÃ­), "PlÃ¡novÃ¡nÃ­ dne" (sekundÃ¡rnÃ­), "MÅ¯j den".
   - Widgety "Po termÃ­nu" a "Tento tÃ½den" musÃ­ bÃ½t klikatelnÃ© â†’ filtr na frontu nebo kalendÃ¡Å™.

2. Fronta k obvolÃ¡nÃ­ (`/queue`)
   - Akce "NaplÃ¡novat" po uloÅ¾enÃ­ pÅ™esmÄ›ruje do PlÃ¡novaÄe na vybranÃ½ den.
   - PÅ™idat proklik na `Detail zÃ¡kaznÃ­ka` a `Detail revize`.
   - V kartÄ› ukÃ¡zat poslednÃ­ komunikaci a poznÃ¡mku (z timeline).

3. KalendÃ¡Å™ (`/calendar`)
   - Klik na revizi vede na `Detail revize` (ne pouze seznam).
   - V detail panelu CTA: "OtevÅ™Ã­t v plÃ¡novaÄi" + "Domluvit" (pokud nemÃ¡ termÃ­n).
   - PÅ™epÃ­naÄ TermÃ­ny/NaplÃ¡novanÃ© zachovat, ale doplnit legendu pro stav workflow.

4. PlÃ¡novaÄ (`/planner`)
   - V seznamu "NaplÃ¡novanÃ©" zobrazit jmÃ©no zÃ¡kaznÃ­ka + adresu + ÄasovÃ© okno.
   - Klik na poloÅ¾ku â†’ detail revize (nebo side panel).
   - TlaÄÃ­tko "PÅ™idat z fronty" (kontextovÃ½ filtr na datum).

5. Detail revize (novÃ½ cÃ­lovÃ½ kontext)
   - CentrÃ¡lnÃ­ hub: status, termÃ­n, poznÃ¡mky, akce podle stavu.
   - Odkazy: zÃ¡kaznÃ­k, komunikace, nÃ¡vÅ¡tÄ›vy, plÃ¡n dne.

#### Detail revize - struktura strÃ¡nky (workflow hub)

**CÃ­l:** Jeden pohled pro vÅ¡echny kroky workflow. UÅ¾ivatel vidÃ­ kontext + dalÅ¡Ã­ akci bez hledÃ¡nÃ­.

**1) Sticky header**
- NÃ¡zev: `Revize - [typ zaÅ™Ã­zenÃ­]`
- Status badge: `ÄŒekÃ¡ na kontakt / Domluveno / NaplÃ¡novÃ¡no / Hotovo / ZruÅ¡eno`
- KlÃ­ÄovÃ© info: `TermÃ­n`, `ÄŒasovÃ© okno`, `DÃ©lka`, `Technik/vozidlo`
- PrimÃ¡rnÃ­ CTA (context-aware):
  - ÄŒekÃ¡ na kontakt â†’ `Domluvit termÃ­n`
  - Domluveno â†’ `OtevÅ™Ã­t v plÃ¡novaÄi (den)`
  - NaplÃ¡novÃ¡no â†’ `OtevÅ™Ã­t v plÃ¡novaÄi (den)`
  - Hotovo â†’ `Zobrazit vÃ½sledek`
- SekundÃ¡rnÃ­ akce (menu): `PÅ™eplÃ¡novat`, `OdloÅ¾it`, `ZruÅ¡it`

**2) Kontekt zÃ¡kaznÃ­ka (card)**
- JmÃ©no, adresa, poznÃ¡mka
- Kontakty: `ğŸ“ Zavolat`, `âœ‰ï¸ Email`
- CTA: `OtevÅ™Ã­t zÃ¡kaznÃ­ka`
- Mini mapa (pokud existuje)

**3) Detail revize (card)**
- ZaÅ™Ã­zenÃ­: typ, nÃ¡zev, interval, poslednÃ­ revize
- TermÃ­n: datum + ÄasovÃ© okno + dÃ©lka
- PÅ™iÅ™azenÃ­: technik/vozidlo/depo (pokud existuje)
- CTA: `OtevÅ™Ã­t zaÅ™Ã­zenÃ­`

**4) Workflow panel (pravÃ½ sloupec / side panel)**
- KontextovÃ© akce dle stavu:
  - ÄŒekÃ¡ na kontakt: `Domluvit`, `OdloÅ¾it`, `Zavolat`
  - Domluveno: `PÅ™eplÃ¡novat`, `OtevÅ™Ã­t v plÃ¡novaÄi`, `ZruÅ¡it`
  - NaplÃ¡novÃ¡no: `OtevÅ™Ã­t v plÃ¡novaÄi`, `PÅ™esun v trase` (pokud existuje)
  - Hotovo: `Zobrazit vÃ½sledek`, `VytvoÅ™it dalÅ¡Ã­ revizi` (pokud se dÄ›lÃ¡ ruÄnÄ›)
- Text "DalÅ¡Ã­ krok": napÅ™. `DalÅ¡Ã­ krok: naplÃ¡novat den`

**5) Historie a komunikace (timeline)**
- Komunikace (hovory, emaily, poznÃ¡mky)
- NÃ¡vÅ¡tÄ›vy (visit log)
- RychlÃ© pÅ™idÃ¡nÃ­ komunikace

**6) Operativa (volitelnÃ©)**
- `Tisk / PDF / Export`
- `Navigovat` (single-stop, pro technika)

#### Detail revize - wireframe (ASCII)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Revize - Plynovy kotel          [STATUS: DOMLUVENO]   [Domluvit termÃ­n]    â”‚
â”‚ TermÃ­n: 30.01.2026  |  Okno: 10:00-11:00  |  DÃ©lka: 45 min  |  Technik: A  â”‚
â”‚ [PÅ™eplÃ¡novat] [OdloÅ¾it] [ZruÅ¡it]                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ZAKAZNIK                                  â”‚  â”‚ WORKFLOW                     â”‚
â”‚ Jan Novak                                 â”‚  â”‚ DalÅ¡Ã­ krok: naplÃ¡novat den   â”‚
â”‚ Lesni 123, Brno                           â”‚  â”‚                             â”‚
â”‚ Pozn.: Parkovat za domem                  â”‚  â”‚ [OtevÅ™Ã­t v plÃ¡novaÄi (den)]  â”‚
â”‚ [ğŸ“ Zavolat] [âœ‰ï¸ Email] [Detail zÃ¡kaznÃ­ka]â”‚  â”‚ [PÅ™eplÃ¡novat] [ZruÅ¡it]        â”‚
â”‚ [Mini mapa]                               â”‚  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REVIZE                                    â”‚  â”‚ HISTORIE / KOMUNIKACE        â”‚
â”‚ ZaÅ™Ã­zenÃ­: Kotel ABC-123                   â”‚  â”‚ - 20.01: VolÃ¡no, nezastiÅ¾en  â”‚
â”‚ Interval: 12 mÄ›sÃ­cÅ¯                       â”‚  â”‚ - 25.01: Email o termÃ­nu     â”‚
â”‚ PoslednÃ­ revize: 15.01.2026               â”‚  â”‚ [PÅ™idat zÃ¡znam]               â”‚
â”‚ [Detail zaÅ™Ã­zenÃ­]                         â”‚  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

6. ~~MÅ¯j den (`/today`)~~ â†’ **SLOUÄŒENO DO PLÃN DNE (`/planner`)**
   - `/today` nynÃ­ pÅ™esmÄ›rovÃ¡vÃ¡ na `/planner`
   - VÅ¡echny funkce (navigace, volÃ¡nÃ­, hotovo) jsou v PlÃ¡n dne

### MinimÃ¡lnÃ­ integraÄnÃ­ checklist âœ… COMPLETE
- [x] ZavÃ©st `Detail revize` jako primÃ¡rnÃ­ uzel workflow âœ…
- [x] PÅ™idat prokliky mezi Fronta â†’ Detail â†’ PlÃ¡n dne âœ…
- [x] VÅ¡echny seznamy revizÃ­ zobrazujÃ­ zÃ¡kaznÃ­ka a akci âœ…
- [x] Dashboard a KalendÃ¡Å™ majÃ­ pÅ™Ã­mÃ½ vstup do fronty/planovÃ¡nÃ­ âœ…
- [x] Po naplÃ¡novÃ¡nÃ­ automatickÃ½ nÃ¡vrat do kontextu (plÃ¡n dne) âœ…
- [x] SlouÄit PlÃ¡novÃ¡nÃ­ + MÅ¯j den do jednÃ© strÃ¡nky "PlÃ¡n dne" âœ…

---

## RozhodnutÃ­ a mapovÃ¡nÃ­ na existujÃ­cÃ­ model

### 1. Entity mapping (ROZHODNUTO)

| NavrÅ¾enÃ¡ entita | ExistujÃ­cÃ­ entita | PoznÃ¡mka |
|-----------------|-------------------|----------|
| Asset | `Device` | âœ… PÅ™Ã­mÃ© mapovÃ¡nÃ­ |
| ServiceCycle | Logika v `Device` + `Revision` | NenÃ­ potÅ™eba novÃ¡ tabulka |
| Job | `Revision` | âœ… Revision = co je potÅ™eba udÄ›lat |
| Appointment | `Revision` | âœ… Revision = kdy se to mÃ¡ udÄ›lat |
| Visit | `Visit` | âœ… HistorickÃ½ zÃ¡znam provedenÃ­ |

**KlÃ­ÄovÃ© rozhodnutÃ­:** NezavÃ¡dÄ›t novÃ© entity Job/Appointment. `Revision` pokrÃ½vÃ¡ obojÃ­:
- `scheduled_date IS NULL` â†’ backlog / ÄekÃ¡ na kontakt
- `scheduled_date IS NOT NULL` â†’ appointment / domluveno

### 2. Stavy revize (ROZHODNUTO)

**Zachovat existujÃ­cÃ­ enum, pÅ™idat odvozenÃ© stavy logikou:**

| UX stav | MapovÃ¡nÃ­ | Implementace |
|---------|----------|--------------|
| ÄŒekÃ¡ na kontakt | `upcoming` | `status='upcoming' AND scheduled_date IS NULL` |
| Domluveno | `scheduled` | `status='scheduled'` (mÃ¡ termÃ­n, nepotvrzeno) |
| Potvrzeno | `confirmed` | `status='confirmed'` |
| NaplÃ¡novÃ¡no v trase | `confirmed` | + `route_order IS NOT NULL` |
| DokonÄeno | `completed` | `status='completed'` |
| OdloÅ¾eno | `upcoming` | + novÃ© pole `snooze_until` |
| ZruÅ¡eno | `cancelled` | `status='cancelled'` |

**NovÃ¡ pole pro Revision (schema change):**
```sql
ALTER TABLE revisions ADD COLUMN snooze_until DATE;
ALTER TABLE revisions ADD COLUMN snooze_reason VARCHAR(255);
ALTER TABLE revisions ADD COLUMN assigned_vehicle_id UUID REFERENCES vehicles(id);
ALTER TABLE revisions ADD COLUMN route_order INTEGER;
```

### 3. Algoritmus nabÃ­dky slotÅ¯ (ROZHODNUTO)

**Insertion Heuristic s Valhalla cache:**

```
1. Pro zvolenÃ½ den + vozidlo naÄti existujÃ­cÃ­ trasu:
   Depot â†’ A â†’ B â†’ C â†’ Depot

2. Pro novÃ©ho zÃ¡kaznÃ­ka X zkus vloÅ¾it mezi kaÅ¾dou dvojici:
   - mezi Depot/A, A/B, B/C, C/Depot

3. SpoÄÃ­tej delta travel time:
   Î” = t(A,X) + t(X,B) - t(A,B)

4. Simuluj forward pass pro feasibility:
   - arrival/departure times
   - ovÄ›Å™ ÄasovÃ¡ okna (hard constraint)

5. SkÃ³re kandidÃ¡ta:
   - 60% Î” travel time (niÅ¾Å¡Ã­ = lepÅ¡Ã­)
   - 25% slack (vÃ­ce = lepÅ¡Ã­)
   - 15% area coherence (volitelnÃ©)

6. Vyber top 3-5 slotÅ¯, diverzifikuj Äasy
```

**VÃ½kon s Valhalla:**
- Cache travel times mezi existujÃ­cÃ­mi body dne
- Pro novÃ½ bod X dopoÄÃ­tat pouze: `t(X, vÅ¡ichni)` a `t(vÅ¡ichni, X)`

### 4. Multi-vehicle a multi-depot (ROZHODNUTO)

**MVP:**
- `Vehicle.home_depot_id` = default start/end
- `Vehicle.preferred_area` = seznam PSÄŒ prefixÅ¯ / okresÅ¯
- RuÄnÃ­ pÅ™iÅ™azenÃ­ + jednoduchÃ© regiony
- UI: zobrazit "Day load" per vehicle

**V2:**
- Clustering zakÃ¡zek do N clusterÅ¯ (N = poÄet aut)
- Auto-balance load mezi vozidly
- `RoutePlan.start_depot_id`, `RoutePlan.end_depot_id` pro pÅ™epsÃ¡nÃ­

### 5. Export Google Maps (ROZHODNUTO)

**Segmentace trasy:**
- RozdÄ›lit na segmenty po 8-10 zastÃ¡vkÃ¡ch
- Generovat 2-5 odkazÅ¯: "Trasa 1/4", "Trasa 2/4"...
- KaÅ¾dÃ½ odkaz otevÅ™e Google Maps s ÄÃ¡stÃ­ dne

**Fallback:**
- PDF / tisk (seznam adres + tel + okna)
- KML/GPX export pro jinÃ© navigace
- "Navigovat" tlaÄÃ­tko per zastÃ¡vka (jednobodovÄ›, bez limitÅ¯)

---

## MVP ImplementaÄnÃ­ plÃ¡n

### FÃ¡ze 1: ZÃ¡kladnÃ­ infrastruktura (1-2 tÃ½dny)

**DB zmÄ›ny:**
```sql
-- RozÅ¡Ã­Å™enÃ­ revisions
ALTER TABLE revisions ADD COLUMN snooze_until DATE;
ALTER TABLE revisions ADD COLUMN snooze_reason VARCHAR(255);
ALTER TABLE revisions ADD COLUMN assigned_vehicle_id UUID;
ALTER TABLE revisions ADD COLUMN route_order INTEGER;

-- NovÃ¡ tabulka vehicles (pokud neexistuje)
CREATE TABLE vehicles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  name VARCHAR(100) NOT NULL,
  home_depot_id UUID REFERENCES depots(id),
  preferred_areas TEXT[], -- PSÄŒ prefixy
  working_hours_start TIME DEFAULT '08:00',
  working_hours_end TIME DEFAULT '17:00',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**Backend:**
- [ ] Migration pro novÃ¡ pole
- [ ] CRUD pro Vehicle entity
- [ ] Endpoint: `revision.queue` - fronta k obvolÃ¡nÃ­

### FÃ¡ze 2: Fronta k obvolÃ¡nÃ­ (1 tÃ½den)

**Endpoint:** `GET /api/revisions/queue`
```typescript
interface QueueFilters {
  status: 'overdue' | 'due_soon' | 'upcoming';
  area?: string;      // PSÄŒ prefix
  deviceType?: string;
  vehicleId?: string;
}

interface QueueItem {
  revision: Revision;
  customer: Customer;
  device: Device;
  daysUntilDue: number;
  lastContactAt?: Date;
  contactAttempts: number;
}
```

**UI komponenty:**
- [ ] `CallQueue` - seznam s filtry
- [ ] `QueueItem` - karta zÃ¡kaznÃ­ka
- [ ] Quick actions: Zavolat, OdloÅ¾it, Domluvit

### FÃ¡ze 3: Domluva revize (1-2 tÃ½dny)

**Endpoint:** `POST /api/revisions/{id}/schedule`
```typescript
interface ScheduleRequest {
  scheduledDate: string;
  timeWindowStart: string;
  timeWindowEnd: string;
  serviceDuration: number;
  vehicleId?: string;
  notes?: string;
}
```

**UI komponenty:**
- [ ] `ScheduleRevisionDialog` - modal pro domluvu
- [ ] KalendÃ¡Å™ s poÄtem volnÃ½ch slotÅ¯ per den
- [ ] Seznam ÄasovÃ½ch oken (zatÃ­m bez smart slotÅ¯)

### FÃ¡ze 4: PlÃ¡n dne - zÃ¡kladnÃ­ (1-2 tÃ½dny)

**Endpoint:** `GET /api/routes/{date}/{vehicleId}`
```typescript
interface DayPlan {
  date: string;
  vehicle: Vehicle;
  stops: PlannedStop[];
  totalDistance: number;
  totalDuration: number;
  warnings: RouteWarning[];
}
```

**UI komponenty:**
- [ ] `DayPlanner` - dispeÄerskÃ½ pohled
- [ ] Drag & drop poÅ™adÃ­ zastÃ¡vek
- [ ] Mapa s trasou (existujÃ­cÃ­)
- [ ] ZÃ¡kladnÃ­ varovÃ¡nÃ­ konfliktÅ¯

### FÃ¡ze 5: MÅ¯j dneÅ¡nÃ­ plÃ¡n (1 tÃ½den)

**UI komponenty:**
- [ ] `TechnicianDayView` - mobilnÃ­-friendly seznam
- [ ] Per-stop akce: Navigovat, Volat, Hotovo, NezastiÅ¾en
- [ ] Export: segmentovanÃ© Google Maps linky
- [ ] PDF export

### FÃ¡ze 6 (V2): Smart sloty (2-3 tÃ½dny)

**Backend:**
- [ ] Insertion heuristic algoritmus
- [ ] Valhalla matrix cache per den/vozidlo
- [ ] Endpoint: `GET /api/slots/suggest`

**UI:**
- [ ] ZobrazenÃ­ doporuÄenÃ½ch slotÅ¯ v `ScheduleRevisionDialog`
- [ ] Vizualizace dopadu na trasu (+X min)

---

## API Endpointy (pÅ™ehled)

| Endpoint | Metoda | Popis |
|----------|--------|-------|
| `/api/revisions/queue` | GET | Fronta k obvolÃ¡nÃ­ |
| `/api/revisions/{id}/schedule` | POST | Domluvit termÃ­n |
| `/api/revisions/{id}/snooze` | POST | OdloÅ¾it revizi |
| `/api/vehicles` | CRUD | SprÃ¡va vozidel |
| `/api/routes/{date}` | GET | PlÃ¡n dne (vÅ¡echna vozidla) |
| `/api/routes/{date}/{vehicleId}` | GET | PlÃ¡n dne (konkrÃ©tnÃ­ vozidlo) |
| `/api/routes/{date}/{vehicleId}/reorder` | POST | ZmÄ›na poÅ™adÃ­ |
| `/api/routes/{date}/{vehicleId}/optimize` | POST | Re-optimalizace |
| `/api/slots/suggest` | POST | DoporuÄenÃ© sloty (V2) |
| `/api/export/googlemaps/{date}/{vehicleId}` | GET | Google Maps linky |
| `/api/export/pdf/{date}/{vehicleId}` | GET | PDF export |

---

## ShrnutÃ­ klÃ­ÄovÃ½ch rozhodnutÃ­

| Oblast | RozhodnutÃ­ |
|--------|------------|
| Entity | NezavÃ¡dÄ›t Job/Appointment, `Revision` je obojÃ­ |
| Stavy | Zachovat enum, â€ÄekÃ¡ na kontakt" = derived, â€odloÅ¾eno" = snooze_until |
| Sloty | Insertion heuristic + Valhalla cache (V2) |
| Multi-vehicle | MVP = ruÄnÃ­ + PSÄŒ regiony, V2 = clustering |
| Export | SegmentovanÃ© Google Maps (8-10 bodÅ¯) + PDF |
| MVP poÅ™adÃ­ | Queue â†’ Schedule â†’ DayPlan â†’ TechView |

---

## DalÅ¡Ã­ kroky

1. [x] ~~ZÃ­skat odpovÄ›di na otevÅ™enÃ© otÃ¡zky~~
2. [x] ~~Namapovat na existujÃ­cÃ­ datovÃ½ model~~
3. [ ] SchvÃ¡lit implementaÄnÃ­ plÃ¡n
4. [ ] DB migrace pro novÃ¡ pole
5. [ ] Implementace FÃ¡ze 1-5 (MVP)
6. [ ] TestovÃ¡nÃ­ s reÃ¡lnÃ½mi daty
7. [ ] Implementace FÃ¡ze 6 (Smart sloty)

---

*Dokument vytvoÅ™en: 2026-01-31*  
*PoslednÃ­ aktualizace: 2026-01-31 (odpovÄ›di na otÃ¡zky + implementaÄnÃ­ plÃ¡n)*
